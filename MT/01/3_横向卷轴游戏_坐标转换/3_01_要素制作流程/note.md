# MT_3_01_横スクロールアクション
# 🎮 敌人・道具・陷阱  要素制作规划笔记
## 前言

前面我们学习了利用 WCS（世界坐标系）和 SCS（屏幕坐标系）的转换方式，  
使得各种游戏要素的位置、运动、碰撞等逻辑计算变得更直观、可控。

本次笔记将系统整理**如何设计并实现各类“敌人、道具、陷阱”要素**。  
主要分为以下几个方向:

- ✅ 创意记录
- 📦 要素分类与编号命名规范  
- 🧠 每种要素的关键行为与对应的实现技术  
- 📝 项目开发建议与记录方式（配合 Discord、VSCode）

---

## 1. ✅ 创意记录

你想让这个角色 / 道具 / 陷阱实现什么样的行为？

不要只在脑中思考，而是**及时写下来**：  
有助于明确目标、方便后续实现、也能整理团队想法。

> 📌 欢迎随时使用我的 Discord 频道进行协作、记录、提问！

---

## 2. 📦 要素分类与命名

| 类型         | 命名前缀     | 示例编号                  |
|--------------|--------------|---------------------------|
| 道具（Item） | `Item_`      | `Item_00` → 超级蘑菇       |
| 敌人（Enemy）| `Enemy_`     | `Enemy_00` → 石头怪（ドッスン）|
| 陷阱（Trap） | `Trap_`      | `Trap_00` → 火焰棒（ファイアバー）|

---

## 3. 🗂️ 各要素技术要点(举例马里奥)

### 🍄 `Item_00`：超级蘑菇（Super Mushroom）

- **种类**：道具（Item）
- **行为特征**：
  - 从方块中弹出后向一侧滑行
  - 碰到墙壁会掉头
  - 被马里奥吃掉后变大
- **关键技术**：
  - 使用世界坐标与方向向量统一管理运动
  - AABB 碰撞判定
  - `velocity = dir × speed` 的结构设计
  - 生命周期管理（出界消失 / 被吃销毁）

---

### 🪨 `Enemy_00`：石头怪（ドッスン / Thwomp）

- **种类**：敌人（Enemy）
- **行为特征**：
  - 静止悬浮 → 玩家靠近 → 急速下压 → 停止 → 回升
- **关键技术**：
  - 横向距离检测 `fabsf(player.x - enemy.x)`
  - 状态机：`scene` `IDLE → FALLING → WAITING → RETURNING`
  - 重力控制（`velocity.y += gravity`）模拟自然下落
  - 使用 `startY` 记录原始高度，实现自动回升
  - 落地判定 / 对玩家造成伤害判定

---

### 🔥 `Trap_00`：火焰棒（ファイアバー / Fire Bar）

- **种类**：陷阱（Trap）
- **行为特征**：
  - 多个火球围绕中心点旋转，形成火焰条
  - 接触即受伤，无法击破
- **关键技术**：
  - 使用极坐标公式计算火球位置（`cosθ`, `sinθ`）
  - 每帧更新角度 `theta` 以实现旋转
  - 判定方式：多个圆形 hitbox（直观）或旋转矩形 hitbox（推荐）
  - 旋转矩形通过“反向旋转 + AABB”方式简化碰撞计算

---

## 开发建议

- 每个要素（敌人 / 道具 / 陷阱）都建议：
  - 建立独立的 `.md` 说明笔记,配套 `.c / .cpp` 源码与模块注释
  - 使用 `结构体 + 状态机 + 坐标变换` 统一构造方式

- 推荐使用工具组合：
  - 🧠 VSCode：写代码 + 写 `.md` 技术笔记
  - 💬 Discord：记录灵感、讨论 bug、贴图说明
  - ✅ GitHub（可选）：版本管理 / 代码提交历史
---

📌 本文档将随着项目推进不断补充更新.对应discord`🍄idea`频道已创立.

📌 本次的确认课题可以说和学习内容没什么关联,仍然是TRS练习.
