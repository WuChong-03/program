# 自作函数

## 🌿基本概念

自作函数就像一个「小型机器」。<br>
- 在定义时，用**形参**设置好规则。
- 在调用时，传入**实参**（具体的数值、变量或地址）作为输入，
- 函数根据规则执行处理，输出返回值 或 直接打印处理等 。

---

### 函数的基本种类

根据函数是否返回结果，可以分为——

- **有返回值函数**  

    ```c
    //定义时
    int/char 函数名(形参){
        //处理
        return 想要的值 
    }                              
    //调用时                        
    int a = 函数(实参)  // 把返回值赋给a以利用
    ```
- **无返回值函数（void）** `void 函数名(){}`

    ```c
    //定义时
    void 函数名(形参){
        //处理
    }
    //调用时
    函数(实参); //直接输出
    ```

返回值函数和无返回值函数都可以“读取或修改数据”，<br>
但返回值函数侧重 —— **“产生结果供外部使用”** <br>
无返回值函数侧重 —— **“直接执行操作或修改状态”。**

---

## 函数的定义写法

函数在使用（调用）之前，编译器必须知道它的存在。
这可以通过两种方式做到：

### 1: 不额外声明,定义直接写在调用前

适合小型程序或练习项目；

```c
#include <stdio.h>
// 提前写好函数定义，之后直接在 main 中调用
void printSum(int a, int b){
    printf("%d", a + b);
}
int main() {
    printSum(10, 20);    // 调用
    return 0;
}
```
### 2: 先声明,定义写最后

在前面“声明”一下告诉编译器：
“下面会有个 printSum() 函数，请先记住它。”

```c
#include <stdio.h>

// 先声明
void printSum(int a, int b);

int main(void) {
    printSum(10, 20);   // 调用
    return 0;
}

// 再定义
void printSum(int a, int b) {
    printf("%d\n", a + b);
}
```
### 3: 声明写在头文件，定义写在另一个源文件
头文件 .h 只写声明，让其他文件都能“知道有这个函数”。<br>
源文件 .cpp 写具体实现。<br>
main.cpp 通过 #include "printSum.h" 连接使用。<br>
编译时，编译器会自动把所有 .cpp 文件链接在一起。<br>
```c
// printSum.h 头文件声明
#pragma once
void printSum(int a, int b);
```
```c
// printSum.cpp 源文件定义
#include <stdio.h>
#include "printSum.h"

void printSum(int a, int b) {
    printf("%d\n", a + b);
}
```
```c
// main.cpp 主源文件调用
#include "printSum.h"

int main(void) {
    printSum(10, 20);
    return 0;
}
```

---

### 📘 自作函数 × 结构体
在 C / C++ 中，结构体（struct） 也是一种「数据类型」。
因此，可以像 `int、float` 一样，
用它来作为函数的参数类型、返回值类型。
在MT_00创造矩阵函数时,我们遇到的就是这种情况.<br>
其实,在进入游戏编程或者数学运算、矩阵、向量类运算之后，
几乎所有函数都不再是返回 int 了，
而是返回「自定义结构体」类型，比如：

- return 向量(Vector2)
- return 矩阵(Matrix2x2)
- return 角色状态(PlayerState)
- return 碰撞盒(Rect)

---

### 函数和作用域　(スコップ)

- 只在相应函数的`{}` 内能引用的变量叫局部变量(ローカル変数)<br>如`main{}`,`if{}`,`for{}`等等;

- 在函数`{}`外声明的变量,叫全局变量(グローバル変数)<br>
全局变量管理麻烦，除常量外一般不推荐使用。

- 自作函数的**仮引数**和**函数内部声明的变量**都是局部变量，只在函数内部有效，用来接收实参或存放临时数据，不会影响外部变量，因此最好给仮引数、实参和局部变量取不同名字以防混乱。

### 关于调试
| 按键  | 功能             | 遇到函数调用               | 适用场景                |
| --- | -------------- | -------------------- | ------------------- |
| F9  | 跳到断点/继续        | 不管，直接运行              | 快速运行到感兴趣位置          |
| F10 | Step Over（逐过程） | **不进入函数**，整个函数当作一行执行 | 只关注当前函数逻辑，不想进入其他函数  |
| F11 | Step Into（逐语句） | **进入函数内部**，逐行调试      | 需要检查函数内部执行流程或调试复杂逻辑 |

- 如果函数很简单，F10 就够了；

- 如果函数逻辑复杂或出错，F11 可以帮你深入排查。

### 函数重载　(オーバーロード)

在 C++ 中（非 C 语言），允许多个同名函数，只要参数类型或数量不同。
```c
void Func(int a, int b);      // 两个整数版本
void Func(double a, double b); // 两个小数版本

Func(3, 4);      // 调用整数版本
Func(2.5, 3.5);  // 调用小数版本
```
- 📘编译器会根据参数自动选择正确版本。<br>
这在游戏编程中常用于处理不同类型输入（如 int/float 位置）。