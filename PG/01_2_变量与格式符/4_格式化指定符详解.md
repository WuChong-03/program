# 4_格式化指定子详解
## 🧩 什么是格式化指定符（Format 指定子）？

C 语言中的格式化指定符是用于 `printf()` 或 `scanf()` 函数中的格式控制字符串，它告诉编译器：

> 📌 “我现在要处理什么类型的数据，请用对应的方式来处理它！”

---

## ✅ 常用格式化指定符一览表

| 指定符  | 对应数据类型        | 说明                                |
|---------|---------------------|-------------------------------------|
| `%c`    | `char`              | 输出一个字符（例如：'A'）            |
| `%s`    | `char*` 或 `char[]` | 输出字符串（以 \0 结尾的字符序列）   |
| `%d`    | `int`, `short`      | 输出十进制整数                       |
| `%f`    | `float`             | 输出单精度浮点数，默认保留 6 位小数 |
| `%lf`   | `double`            | 输出双精度浮点数，默认也保留 6 位小数 |

---

## 🧩 格式化控制字符串的结构

格式控制字符串中的每个格式化片段，遵循以下语法结构顺序：

% [flags] [width] [.precision] [`length暂不涉及`] specifier

| 位置             | 内容说明        | 示例              |
| -------------- | ----------- | --------------- |
| `%`            | 格式控制起始符     | `%`             |
| `[flags]`      | 标志位（对齐、符号等） | `-`, `+`, `0` 等 |
| `[width]`      | 总宽度（占位宽度）   | `8`             |
| `[.precision]` | 小数或最大字符数    | `.2`            |
| `[specifier]`  | 数据类型标识符     | `d`, `f`, `s` 等 |

## 标志位 [flags]

标志位是用于控制输出细节的字符，可以组合使用，但有优先级和冲突关系。

- 🧊前导零（リーディングゼロ）

    当使用 `printf()` 输出数字时，可以在左侧用 `0` 自动补齐，直到满足总宽度要求。

    - 这个方式适用于整数和小数，常用于统一编号、日期、时间等格式。

    ⚠️ 如果同时指定了 `0` 和 `-`，会优先左对齐. 所以 %-05d 实际上等价于 %-5d，不会补 0，而是补空格

    > 格式：% `0` `总宽度` . `小数位数` f
    ```c
    int num = 7;
    printf("[%05d]", num); // 输出：[00007]

    float pi = 3.14f;
    printf("[%07.2f]", pi); // 输出：[003.14]
    ```

----------------------------------------

- ↔️指定对齐方式（右对齐・左对齐）

    使用 `printf()` 输出数据时，`默认是右对齐`, 如果你希望输出内容左对齐，可以在宽度前面加上一个 ` - `号。

    > 格式：% `-` `宽度` d（左对齐）
    - 默认情况下数字是靠右显示的，如 `[     1]`
    - 加上 - 后数字就会靠左对齐，空格填在后面，如 `[1 ]`

    ⚠️ 如果同时指定了 `0` 和 `-`，会优先左对齐. 所以 %-05d 实际上等价于 %-5d，不会补 0，而是补空格
    ```c
    int num = 1;
    printf("[%-05d]", num); // 输出：[1    ]
    ```


---

- ➕显示正负号（符号）

    默认情况下，输出负数默认会显示符号, 但正数不会显示加号，只显示数值本身。  
    如果希望正数也显示 `+` 号，可以在格式化指定符中添加 `+`。

    > 格式：%+d（整数）、%+f（float）、%+lf（double）等都适用

    ```c
    printf("[%+05d]", 42);   // 输出：[+0042]

    float f = 3.14f;
    printf("[%+f]", f);  // 输出：[+3.140000]
    ```

--- 

## 总宽度 [width]

可以通过格式控制符中的 width 设置输出的最小总宽度（单位是字符个数）
>格式：% `总宽度` f

- 总宽度包括：整数部分、小数点、小数部分

- 如果实际输出内容的长度小于总宽度，系统会自动在`左侧补空格`

- 如果实际内容超过总宽度，系统会`自动扩展`输出宽度
```c
    int num = 123;
    printf("[%6d]", num);  // 输出：[   123]
```

-------------------------------------


##  指定小数精度 [.precision]

使用 `printf()` 输出小数时，可以通过格式化指定符控制小数点后保留的位数。

> 格式：%  . `小数位数` f

- 如果不写，`float` 和 `double` 都默认保留 6 位小数

- 如果写了保留 N 位小数，多的部分会`四舍五入`

        float 的精度大约为 7 位有效数字，因此最多使用 %.7f
        double 的精度大约为 15~17 位有效数字，推荐最多使用 %.15f 
        超过这个范围，数值将会出现误差或四舍五入偏差
```c
    float num = 3.141592f;
    printf("[%8.2f]", num); // 输出：[    3.14]
```

--------------------------------------

## 全部混搭例子:
```c
printf(" % - + 0 8 .2f", 3.14f);   // 输出：[+3.14   ]
//起始符,左对齐,显示正号,先导0被忽略,总宽度8,小数点后2位
```




### 📦 附加: 字符串格式化 `%s`

`%s` 是用于输出字符串（`char[]` 或 `char*`）的格式化指定符。  

字符串型的语法结构顺序和其他型略有不同

数字型格式常用的 0（前导补零）、+（显示正号）等，在字符串 %s 中无效。

%.Ns：表示最多输出前N个字符（截断）

```c
char str[] = "ChatGPT";
printf("[%10s]\n", str);     // → [   ChatGPT]
printf("[%-10s]\n", str);    // → [ChatGPT   ]
printf("[%.4s]\n", str);     // → [Chat]
printf("[%10.4s]\n", str);   // → [      Chat]
```